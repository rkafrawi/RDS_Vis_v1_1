<!-- dx-header -->
# rds_visualizer (DNAnexus Platform App)

RDS visualizing webapp. Accepts file uploads in .rds format and renders a series of user-query guided visualizations including Feature Plots, Dim Plots, Violin plots.

This is the source code for an app that runs on the DNAnexus Platform.
For more information about how to run or modify it, see
[https://documentation.dnanexus.com/](https://documentation.dnanexus.com/getting-started/developer-tutorials/web-app-let-tutorials/running-rstudio-shiny-server-and-apps).
<!-- /dx-header -->

<!-- Insert a description of your app here -->
The `DNAnexus_deploy/Dockerfile` was used to generate the rshiny image used to build the Docker image used in the web app. The `DNAnexus_deploy/dxapp.json` file contains the web app metadata. Lastly, the `DNAnexus_deploy/rds_visualizer.sh` script was used to build and deploy the web app.

## Instructions for Web App Build/Deploy

### 1.Logging in and running dx-app-wizard

Log into the DNAnexus platform using a token. Tokens can be generated under the user profile > API Tokens.

```
dx login --token <token>
# Enter your username, token
# Select the project where you want to deploy your app.
```
### 2. Now, to create the Web App, start the app wizard by executing the command:
```
dx-app-wizard
```

This results in a directory with the following layout:
flying_kmeans <br>
├── dxapp.json  <br>
├── src  <br>
&emsp;│   └── flying_kmeans.sh  <br>
├── Readme.developer.md  <br>
├── Readme.md  <br>
├── resources  <br>
&emsp;└── test

### 3. Create web app
```
    "version": "0.0.1",
    "inputSpec": [],
```

Modify it to the following:

```
    "version": "0.0.1",
    "httpsApp": {
          "ports": [443],
          "shared_access": "VIEW"
      },
    "inputSpec": [],
```

### 4. Create app code
hi
```
#!/bin/bash
# flying_kmeans 0.0.1
set -eux
main() {
 # get K-means app code
 mkdir kmeans_app
url=https://raw.githubusercontent.com/rstudio/shiny-examples/master/050-kmeans-example
 wget -P kmeans_app/ $url/DESCRIPTION $url/server.R $url/ui.R
 # pull and run Shiny Server docker image
 # attach our K-means app's folder as a volume
 docker run --rm -p 443:3838 -v $PWD/kmeans_app:/srv/shiny-server/ rocker/shiny
}

```
### 5. Build and deploy
```
dx build -f rds_visualizer
```

### 6. Start the app

<!--
TODO: This app directory was automatically generated by dx-app-wizard;
please edit this Readme.md file to include essential documentation about
your app that would be helpful to users. (Also see the
Readme.developer.md.) Once you're done, you can remove these TODO
comments.

For more info, see https://documentation.dnanexus.com/developer.
-->
